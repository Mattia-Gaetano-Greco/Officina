<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="ISO-8859-1">
    <title>Pannello di controllo</title>
    <style>

        .modal {
            position: fixed;
            inset: 0;
            background: rgba(75, 75, 75, 0.7);
            display: none;
            align-items: center;
            justify-content: center;
        }

        .modal:target {
            display: flex;
        }
        
    </style>
</head>
<body style="min-height: 97vh;">
    <div style="height:97vh">
        <div style="width: 10%; height: 100%; float: left; border:1px solid black;">
            <h2 style="text-align: center;">Menu</h2>
            <ul>
                <a href="#popup-box">Le tue informazioni</a>
                <br><br>
                <form th:action="@{/dipendente/logout}" method="post">
                    <input type="submit" value="Logout" />
                </form>
            </ul>
        </div>
        <div style="width: 89%; height: 100%; float: right; border:1px solid black;">
            <div>
                <h1 style="margin-left: 50px; display:inline-block"> Ordini </h1>
                <button style="margin-left: 50px; display:inline-block">Aggiungi ordine</button>
            </div>
            <table style="width:50%">
                <tr style="display: inline-block; margin:5px" th:each="kanban : ${kanbans}">
                    <td> <a th:text="${kanban.getNome()}" th:href="@{kanban?pos_kanban={pos_kanban}(pos_kanban=${kanban.getPosizione()})}"></a> </td>
                </tr>
            </table>
            <table style="width: 100%;">
                <tr style="width: 100%;">
                    <th style="width: 11%">Titolo</th>
                    <th style="width: 11%">Informazioni veicolo</th>
                    <th style="width: 11%">Costo totale</th>
                    <th style="width: 11%">Data di scadenza</th>
                    <th style="width: 11%">Stato pagamento</th>
                    <th style="width: 11%">Commento cliente</th>
                    <th style="width: 11%">Data creazione</th>
                    <th style="width: 11%">Autorizzato</th>
                    <th style="width: 11%">Raccomandazione</th>
                </tr>
                <tr style="width: 100%;" th:each="ordine : ${ordini}">
                    <td style="width: 11%; text-align: center;" th:text="'(#' + ${ordine.getId_ordine()} + ') ' + ${ordine.getTitolo()}"></td>
                    <td style="width: 11%; text-align: center;" th:text="${ordine.getVeicolo().getMarca()} + ' - ' + ${ordine.getVeicolo().getModello()} 
                        + ' - ' + ${ordine.getVeicolo().getAnno_costruzione()}"></td>
                    <td style="width: 11%; text-align: center;" th:text="${ordine.getRicavo()}"></td>
                    <td style="width: 11%; text-align: center;" th:text="${ordine.getData_scadenza()}"></td>
                    <td style="width: 11%; text-align: center;" th:text="${ordine.isPagamento_effettuato()} ? 'Si' : 'No'"></td>
                    <td style="width: 11%; text-align: center;" th:text="${ordine.getCommento_cliente()}"></td>
                    <td style="width: 11%; text-align: center;" th:text="${ordine.getData_creazione()}"></td>
                    <td style="width: 11%; text-align: center;" th:text="${ordine.isAutorizzato()} ? 'Si' : 'No'"></td>
                    <td style="width: 11%; text-align: center;" th:text="${ordine.getRaccomandazione()}"></td>
                <tr style="width: 100%;" ></tr>
            </table>
        </div>
    </div>
    <div id="popup-box" class="modal">
        <div>
            <h1> Le tue informazioni: </h1>
            <form th:action="@{/cliente/update}" method="post">
                <label for="nome">Nome</label><br>
                <input type="text" id="nome" name="nome" th:value=${principal.getUser().getNome()} />
                <br><br>
                <label for="cognome">Cognome</label><br>
                <input type="text" id="cognome" name="cognome" th:value=${principal.getUser().getCognome()} />
                <br><br>
                <label for="telefono">Telefono</label><br>
                <input type="text" id="telefono" name="telefono" th:value=${principal.getUser().getNumero_telefono()} />
                <br><br>
                <label for="email">Email</label><br>
                <input type="text" id="email" name="email" th:value=${principal.getUser().getEmail()} />
                <br><br>
                <button th:href="@{/dipendente/update_password}"> Cambia password </button>
                <br><br>
                <input type="submit" value="Salva dati" />
            </form>
            <br>
            <button onclick="window.location.href='#'" style="background-color: #fe0606; color: white"> Chiudi </button>
        </div>
    </div>
</body>
</html>